CC=gcc
LDFLAG=
LPFLAG=-g
ARCHIVE_NAME=eval_3.6_rigaud_tichadou.zip

SRC=$(wildcard *.c)
OBJ=$(SRC:.c=.o)

EXE=client
EXE2=serveur
EXE3=test

all: mrpropre serveur client

serveur:
	@$(CC) -g -Wall -o serveur serveur.c outils_serveur.c mem_targa.c crypter.c  AES.c
	@echo "operation terminee.\nl application a ete creer."

client:
	@$(CC) -g -Wall -o client client.c mem_targa.c crypter.c outils_client.c AES.c
	@echo "operation terminee.\nl application a ete creer."

test: mrpropre
	@$(CC) -g -Wall -o test testU.c outils_serveur.c mem_targa.c crypter.c AES.c
	@echo "operation terminee.\nl application a ete creer."
	@./$(EXE3) 2> /dev/null

%.o: %.c
	@$(CC) $(LPFLAG) -o $@ -c $<

#########################################

runclient:
	./$(EXE) 127.0.0.1

runserveur:
	./$(EXE2)


#########################################


clean:
	@rm -rf *.o *~

mrpropre: clean
	@rm -rf $(EXE)
	@rm -rf $(EXE2)
	@rm -rf $(EXE3)



##########################################

zip:
	zip -9 -r $(ARCHIVE_NAME) ../eval_3.6_rigaud_tichadou
